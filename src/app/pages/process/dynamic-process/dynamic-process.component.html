<div class="container">
    <nb-card>
        <nb-card-header>
            <h2>DYNAMIC PROCESS</h2>
        </nb-card-header>
        <nb-card-body>
            <form #myForm>
                <div class="row">
                    <div class="col-md-3">
                        <label class="required">Process Name:</label>
                        <input type="text" name="processName" class="form-control"
                        #processName1="ngModel"
                        [(ngModel)]='formValues.processName'
                        required 
                        [ngClass]="{'is-invalid': formSubmitted && processName1.invalid}">
                        <div class="invalid-feedback"
                            *ngIf="formSubmitted && (processName1.invalid || processName1.dirty || processName1.touched)">
                            <span>Process name is required.</span>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <label class="required">Time(minutes):</label>
                        <input type="text" name="time" class="form-control" [(ngModel)]='formValues.time' required 
                            #time1="ngModel" [ngClass]="{'is-invalid': formSubmitted && time1.invalid}"
                            (keypress)="numberOnly($event)">
                        <div class="invalid-feedback"
                            *ngIf="formSubmitted && (time1.invalid || time1.dirty || time1.touched)">
                            <span>Time is required.</span>
                        </div>
                    </div>

                    <div class="col-md-1">
                        <nb-icon icon="plus-circle" status="primary" [options]="{ animation: { type: 'zoom' } }" (click)="onAddStep()" class="plus-add"></nb-icon>
                    </div>

                    <br>
                    {{stepList}}
                    <div class="col-md-12" *ngIf="stepList? stepList.length:stepList;"> 
                        <div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)">
                          <nb-accordion class="card-height" *ngFor="let step of stepList" cdkDragLockAxis="y" cdkDrag>
                                <nb-accordion-item style="margin-top: 40px !important;" #item (click)="onStepClick(step)">
                                    <nb-accordion-item-header class="item-header">
                                            {{step.stepName}}
                                            <nb-icon icon="trash" status="danger" 
                                            [options]="{ animation: { type: 'zoom' } }" 
                                            (click)="onDeleteStep(step)" class="trash"></nb-icon>
                                            <nb-icon icon="edit" status="primary" [options]="{ animation: { type: 'zoom' } }" (click)="onEditStep(step)" class="edit"></nb-icon>
                                            <nb-icon icon="plus-circle" status="success" [options]="{ animation: { type: 'zoom' } }" (click)="onAddFunction(step)" class="plus-function-add"></nb-icon>
                                    </nb-accordion-item-header>
                                </nb-accordion-item>
                            </nb-accordion>
                        </div>
                    </div>
                    <br> 
                </div>
                <br><br>
                <div class="row">
                    <button type="button" class="btn btn-primary"
                    style="margin-right:20px">ADD</button>
                    <button type="button" class="btn btn-primary"
                    style="margin-right:20px" [routerLink]="['pages/process']">CANCEL</button>
                </div>
            </form>
        </nb-card-body>
    </nb-card>
</div>