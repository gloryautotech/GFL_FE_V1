<div id="target"></div>
<nb-card class="nb-style">
    <nb-card-header class="nb-header">

        <h2 class="nb-text">Production Planning</h2>

    </nb-card-header>
    <nb-card-body class="batch-pd-top-16">
        <div>
            <form #myForm="ngForm">
                <div class="batch-mb">
                    <div class="row">
                        <!-- Party name -->
                        <div class="col-md-6">
                            <div class="border-right-batch">
                                <div class="form-group mb-1">
                                    <div class="row">
                                        <div class="col-md-3 col-12 display-flex-start label-0">
                                            <label>Party</label>
                                        </div>
                                        <div class="col-md-8 col-12">
                                            <ng-select name="partyId" [(ngModel)]='productionPlanning.partyId' required
                                                placeholder="Party Name" (change)=partySelected($event)>
                                                <ng-option disabled="true">
                                                    <div class="row">
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-left txt-ov-elips">Party Name</div>
                                                        </div>
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-right txt-ov-elips">Party Code</div>
                                                        </div>
                                                    </div>
                                                </ng-option>
                                                <ng-option *ngFor="let p of partyList" [value]="p.id">
                                                    <div class="row">
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-left txt-ov-elips"> {{p.partyName}}</div>
                                                        </div>
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-right txt-ov-elips"> {{p.partyCode}}</div>
                                                        </div>
                                                    </div>
                                                </ng-option>
                                            </ng-select>
                                        </div>
                                    </div>


                                </div>
                                <div class="form-group mb-1">
                                    <div class="row">
                                        <div class="col-md-3 col-12 display-flex-start label-0">
                                            <label>Quality</label>
                                        </div>
                                        <div class="col-md-8 col-12">
                                            <ng-select name="qualityId" [(ngModel)]='productionPlanning.qualityId'
                                                placeholder="Quality ID" (change)=qualitySelected($event)>
                                                <ng-option disabled="true">
                                                    <div class="row">
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-left txt-ov-elips">Quality Id</div>
                                                        </div>
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-right txt-ov-elips">Party Name</div>
                                                        </div>
                                                    </div>
                                                </ng-option>
                                                <ng-option *ngFor="let q of qualityList" [value]="q.qualityId">
                                                    <div class="row">
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-left txt-ov-elips"> {{q.qualityId}}</div>
                                                        </div>
                                                        <div class="col-md-6 col-6">
                                                            <div class="text-right txt-ov-elips"> {{q.partyName}}</div>
                                                        </div>
                                                    </div>
                                                </ng-option>
                                            </ng-select>
                                        </div>
                                    </div>


                                </div>
                                <div class="form-group mb-1">
                                    <div class="row">
                                        <div class="col-md-3 col-12 display-flex-start label-0">
                                            <label>Batch</label>
                                        </div>
                                        <div class="col-md-8 col-12">
                                            <input type="text" #batchFilter1="ngModel" class="form-control size-small"
                                                fieldsize="small" nbinput name="batch" [(ngModel)]='batch'
                                                (keyup)="filter($event)" required placeholder="Enter Batch">
                                        </div>
                                    </div>



                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="jus-con-flex-start">
                                <div class="col-md-5 col-12 pd-0">
                                    <div class="display-flex mr-0">


                                        <div class="batch-p-color label-0">
                                            <label>Party Name</label>
                                        </div>
                                        <!-- 

                                        <div class="batch-col text-center">
                                            <span>:</span>
                                        </div>
 -->

                                        <div class="party-name-text text-center">
                                            <h6 class="production-plan-text">Bhautik Mehta</h6>
                                        </div>




                                    </div>

                                    <div class="display-flex mr-0">


                                        <div class="batch-p-color label-0 text-Left">
                                            <label>Quality Name</label>
                                        </div>

                                        <!-- <div class="batch-col text-center">
                                                    <span>:</span>
                                                </div> -->


                                        <div class="party-name-text text-center">
                                            <h6 class="production-plan-text">Quality name</h6>
                                        </div>



                                    </div>
                                    <div class="display-flex mr-0">


                                        <div class=" batch-p-color label-0 text-Left">
                                            <label>Quality Id</label>
                                        </div>

                                        <!-- <div class="col-md-2">
                                                <div class="batch-col text-center">
                                                    <span>:</span>
                                                </div>
                                            </div> -->

                                        <div class="party-name-text text-center">
                                            <h6 class="production-plan-text">250</h6>
                                        </div>



                                    </div>

                                    <div class="display-flex mr-0">


                                        <div class="batch-p-color label-0 text-Left">
                                            <label>Process Name</label>
                                        </div>



                                        <!-- <div class="batch-col text-center">
                                                    <span>:</span>
                                                </div> -->


                                        <div class="party-name-text text-center">
                                            <h6 class="production-plan-text">Process Name</h6>
                                        </div>



                                    </div>

                                </div>
                                <!-- <div class="col-md-1 col-12 border-right-card-batch"></div> -->
                                <div class="col-md-4 col-12 pd-0">

                                    <div class="display-flex mr-0">


                                        <div class="batch-p-color label-0 text-Left">
                                            <label>Party Shade No.</label>
                                        </div>


                                        <!-- <div class="batch-col text-center">
                                                    <span>:</span>
                                                </div> -->


                                        <div class="party-name-text text-center">
                                            <h6 class="production-plan-text">250</h6>
                                        </div>



                                    </div>
                                    <div class="display-flex mr-0">


                                        <div class="batch-p-color label-0 text-Left">
                                            <label>Lot Weight</label>
                                        </div>


                                        <!-- <div class="batch-col text-center">
                                                    <span>:</span>
                                                </div> -->


                                        <div class="party-name-text text-center">
                                            <h6 class="production-plan-text">25%</h6>
                                        </div>


                                    </div>
                                    <div class="display-flex mr-0">


                                        <div class="batch-p-color label-0 text-Left">
                                            <label>Lot Meter</label>
                                        </div>


                                        <!-- <div class="batch-col text-center">
                                                    <span>:</span>
                                                </div> -->


                                        <div class="party-name-text text-center">
                                            <h6 class="production-plan-text">25%</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <hr>

                    <nb-flip-card [showToggleButton]="false" [flipped]="flipped">
                        <nb-card-front>
                            <nb-card>
                                <div class="title-with-btn">
                                    <div class="row">
                                        <div class="col-md-9 col-5">
                                            <div class="batch-list-production">
                                                <h2 class="nb-text font-14 batch-mr-0">Batch List:</h2>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-7 display-flex-end">
                                            <div class="jet-btn-production">
                                                <button class="btn btn-md btn-design-save font-14 btn-plan"
                                                    type="button" (click)="toggleView()">Jet planning</button>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="production-btn-list">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="batch-list-3line">
                                                <button nbButton size="small" *ngFor="let b of batchList"
                                                    (click)="onBatchSelect(b.batchId)" class="p-badge-design">
                                                    {{b.batchId}} </button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>

                                <div class="title-with-btn">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="batch-list-production">
                                                <h2 class="nb-text font-14 batch-mr-0">Production Plan List:</h2>
                                            </div>
                                        </div>

                                    </div>

                                </div>

                                <div class="production-btn-list">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group batch-list-3line">
                                                <button nbButton size="small"
                                                    class="jet-popup-box production-list-popup mr-left-10 border-radius"
                                                    *ngFor="let b of plannedProductionList" [value]="b.id"
                                                    class="jet-popup-display p-badge-design"
                                                    [style.background]="b.colorTone" (click)="batchSelected($event)">
                                                    {{b.batchId}} </button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </nb-card>
                        </nb-card-front>
                        <nb-card-back>
                            <nb-card>
                                <div id="jetList">
                                    <div class="jet-btn-production">
                                        <button class="btn btn-md btn-design font-14" (click)="toggleView()"
                                            type="button">Production Plan</button>
                                    </div>

                                    <table class="user-per-table table-responsive table-jet">
                                        <tr width="100%">
                                            <th width="5%">Jet</th>
                                            <th width="8%">Capacity</th>
                                            <th width="82%">Sequence</th>
                                        </tr>
                                        <tr *ngFor="let j of jet;let i=index">
                                            <td>{{j.name}}</td>
                                            <td>{{j.capacity}}</td>
                                            <td>
                                                <div cdkDropList [cdkDropListData]="j.jetDataList"
                                                    cdkDropListOrientation="horizontal"
                                                    class="example-list main-table-drag"
                                                    (cdkDropListDropped)="drop($event,i)">
                                                    <div class="example-box trans-box-drop-1"
                                                        *ngFor="let index of j.jetDataList"
                                                        [style.background]="index.colorTone"
                                                        (click)="setIndexForSlip(index)" cdkDrag>
                                                        <!--[style.background]="index.colorTone"-->
                                                        <button nbContextMenuTag="my-context-menu"
                                                            [nbContextMenu]="items" nbContextMenuTrigger="click"
                                                            class="jet-btn-changes btn-changes-jet ">
                                                            {{index.batchId}}
                                                        </button>

                                                    </div>

                                                </div>

                                            </td>

                                        </tr>
                                    </table>
                                </div>
                            </nb-card>
                        </nb-card-back>
                    </nb-flip-card>

                </div>
            </form>
        </div>
    </nb-card-body>
</nb-card>