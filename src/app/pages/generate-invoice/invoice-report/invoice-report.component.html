<nb-card>
    <nb-card-header class="nb-header">
        <div>
            <h2 class="nb-text">Invoice Report</h2>
        </div>
    </nb-card-header>
    <nb-card-body>
        <form #invoiceForm="ngForm">
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label>Master</label>
                        <ng-select name="masterId" [(ngModel)]='invoiceReportRequest.userHeadId' required #userHeadId1="ngModel" (change)=" null" placeholder="Select Master" class="required-error-dropdown" appendTo="body">
                            <ng-option *ngFor="let head of masterList" [value]="head.id">{{head.firstName}} {{head.lastName}}
                            </ng-option>
                        </ng-select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label>Party</label>
                        <ng-select name="partyId" [(ngModel)]='invoiceReportRequest.partyId' required #partyId1="ngModel" (change)="null" placeholder="Select Party" class="required-error-dropdown" appendTo="body">
                            <ng-option *ngFor="let p of partyList" [value]="p.id">{{p.partyName}}</ng-option>
                        </ng-select>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="form-group">
                        <label>From date:</label>
                        <input class="form-control" name="fromDate" [max]="maxDate" [(ngModel)]="invoiceReportRequest.from" style="width: 100%;height: 100%;" [owlDateTimeTrigger]="dtFrom1" [owlDateTime]="dtFrom1" placeholder="Select Date">
                        <owl-date-time (afterPickerClosed)="null" [pickerType]="'calendar'" #dtFrom1>
                        </owl-date-time>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label>To date:</label>
                        <input class="form-control" name="toDate" [max]="maxDate" [(ngModel)]="invoiceReportRequest.to" style="width: 100%;height: 100%;" [owlDateTimeTrigger]="dtTo1" [owlDateTime]="dtTo1" placeholder="Select Date">
                        <owl-date-time (afterPickerClosed)="null" [pickerType]="'calendar'" #dtTo1>
                        </owl-date-time>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-12 mobile-btn-center text-btn-right">
                    <div class="padding-bt-tp">
                        <button type="button" class="btn btn-primary btn-sm btn-design-save button-base ripple" style="margin-right:20px" (click)="getShortReport()" [disabled]="disableButton">Get
                            Report</button>
                        <button type="button" class="btn btn-primary btn-sm btn-design-save button-base ripple" style="margin-right:20px" (click)="getDetailedReport()" [disabled]="disableButton">Get
                            Detailed
                            Report</button>
                    </div>
                </div>
            </div>

            <div *ngIf="shortReport && shortReport.length > 0" style="margin-top: 50px;" id="shortReport">
                <div *ngFor="let invoice of shortReport">
                    <!-- Invoice No: {{invoice.invoiceNo}} Party: {{invoice.partyName}} Master: {{invoice.headName}} Total Mtr: {{invoice.totalBatchMtr}} Total Finish Mtr: {{invoice.totalFinishMtr}} Total Amount: {{invoice.amt}} -->
                    <div style="margin:0 25px; text-align: center;">
                        <h1 style="font-size: 25px;">INVOICE REPORT</h1>
                        <table style="width: 100%;" class="table process-tb table-bordered table-striped table-process-fnt dying-table">
                            <tr>
                                <th>Invoice No</th>
                                <th>Party</th>
                                <th>Master</th>
                                <th>Total Mtr</th>
                                <th>Total Finish Mtr</th>
                                <th>Total Amount</th>
                            </tr>
                            <tr>
                                <td>{{invoice.invoiceNo}}</td>
                                <td> {{invoice.partyName}}</td>
                                <td>{{invoice.headName}}</td>
                                <td>{{invoice.totalBatchMtr}}</td>
                                <td>{{invoice.totalFinishMtr}}</td>
                                <td>{{invoice.amt}}</td>
                            </tr>

                        </table>
                    </div>
                </div>
            </div>

            <div class="container" *ngIf="detailedReport && detailedReport.length > 0" style="margin-top: 50px;margin-left:50px" id="detailedReport">
                <div *ngFor="let invoice of detailedReport">
                    <div class="row">
                        <div class="col-md-3" style="width: 30%;" class="font-styles">
                            <div style="text-align: center;">
                                <h2 style="display: inline-block; margin-right: 10px; font-size: 25px;"> Master:</h2> <span style="font-size: 23px; display: inline-block;" class="tb-name">{{invoice.headName}}</span>
                            </div>
                        </div>
                        <div class="col-md-3" style="width: 32%;" class="font-styles">
                            <div style="text-align: center;">
                                <h2 style="display: inline-block; margin-right: 10px; font-size: 25px;"> Party:</h2> <span style="font-size: 23px; display: inline-block;" class="tb-name">{{invoice.partyName}}</span>
                            </div>
                        </div>
                        <div class="col-md-3" style="width: 32%;" class="font-styles">
                            <div style="text-align: center;">
                                <h2 style="display: inline-block; margin-right: 10px; font-size: 25px;">Invoice No:</h2> <span style="font-size: 23px; display: inline-block;" class="tb-name">{{invoice.invoiceNo}}</span>
                            </div>
                        </div>

                        <!-- <table style="width: 100%;" class="table process-tb table-bordered table-striped table-process-fnt dying-table">
                            <tr>
                                <th>Master</th>
                                <th>Party</th>
                                <th>Invoice No</th>

                            </tr>
                            <tr>
                                <td>{{invoice.headName}}</td>
                                <td> {{invoice.partyName}}</td>
                                <td>{{invoice.invoiceNo}}</td>

                            </tr>

                        </table> -->

                        <br><br>

                        <div *ngFor="let quality of invoice.qualityList" class="col-md-12" style="width: 100%; margin-top: 55px;">
                            <div style="text-align: center; width: 90%;">
                                <h1 style="font-size: 25px;">Quality List</h1>
                                <table style="width: 100%;" class="table process-tb table-bordered table-striped table-process-fnt dying-table">
                                    <tr>
                                        <th>Batch Id</th>
                                        <th>Quality ID</th>
                                        <th>Total Meter</th>
                                        <th>Total Finished Meter</th>
                                        <th>Rate</th>
                                        <th>Total Amount</th>
                                    </tr>
                                    <tr>
                                        <td>{{quality.batchId}}</td>
                                        <td>{{quality.qulityId}}</td>
                                        <td>{{quality.totalMtr}}</td>
                                        <td>{{quality.totalFinishMtr}}</td>
                                        <td>{{quality.rate}}</td>
                                        <td>{{quality.amt}}</td>
                                    </tr>

                                </table>
                            </div>
                            <!-- BatchId: {{quality.batchId}} Quality ID: {{quality.qulityId}} Total Meter: {{quality.totalMtr}} Total Finished Meter: {{quality.totalFinishMtr}} Rate: {{quality.rate}} Total Amount: {{quality.amt}} -->
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </nb-card-body>
</nb-card>