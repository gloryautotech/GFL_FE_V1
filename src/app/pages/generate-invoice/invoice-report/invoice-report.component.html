<nb-card>
    <nb-card-header class="nb-header">
        <div class="row">
            <div class="col-md-10 col-6">
                <h2 class="nb-text">Invoice Report</h2>
            </div>

            <div class="col-md-2 col-6 display-flex-start desktop-justify-flexend">
                <button class="btn btn-md btn-design" [routerLink]="['/pages/generate_invoice/view']">View
                    Table</button>
            </div>
        </div>
    </nb-card-header>
    <nb-card-body>
        <form #invoiceForm="ngForm">
            <div class="row">

                <div class="col-md-6">
                    <div class="form-group">
                        <label class="required">From date</label>
                        <input class="form-control" #from="ngModel" required name="fromDate" [max]="maxDate"
                            [(ngModel)]="invoiceReportRequest.from" [owlDateTimeTrigger]="dtFrom1"
                            [owlDateTime]="dtFrom1" placeholder="Select Date"
                            [ngClass]="{'is-invalid':(from.invalid)&&(formSubmitted || from.touched)}">
                        <owl-date-time (afterPickerClosed)="null" [pickerType]="'calendar'" #dtFrom1>
                        </owl-date-time>
                    </div>
                    <div class="input-required" *ngIf="(from.invalid)&&(formSubmitted || from.touched)">
                        <span>From date is required.</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="required">To date</label>
                        <input class="form-control" #to="ngModel" required name="toDate" [max]="maxDate"
                            [(ngModel)]="invoiceReportRequest.to" [owlDateTimeTrigger]="dtTo1" [owlDateTime]="dtTo1"
                            placeholder="Select Date"
                            [ngClass]="{'is-invalid': (to.invalid)&&(formSubmitted || to.touched)}">
                        <owl-date-time (afterPickerClosed)="null" [pickerType]="'calendar'" #dtTo1>
                        </owl-date-time>
                    </div>
                    <div class="input-required" *ngIf="(to.invalid)&&(formSubmitted || to.touched)">
                        <span>To date is required.</span>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-12 mobile-btn-center text-btn-right">
                    <div class="padding-bt-tp">
                        <button type="button" class="btn btn-primary btn-sm btn-design-save button-base ripple"
                            (click)="getShortReport(invoiceForm)" [disabled]="disableButton">Get
                            Report</button>
                        <!-- <button type="button" class="btn btn-primary btn-sm btn-design-save button-base ripple" (click)="getDetailedReport()" [disabled]="disableButton">Get
                            Detailed
                            Report</button> -->
                    </div>
                </div>
            </div>

            <div *ngIf="shortReport && shortReport.length > 0" id="shortReport" class="print-body">
                <div class="row report-header">
                    <div class="col-md-12 print-layout-report">
                        <h4>
                            <span class="font-25">INVOICE REPORT</span>
                            <span>{{currentDate | date : 'short'}}</span>
                        </h4>
                    </div>
                </div>
                <div *ngFor="let report of shortReport">
                    <div class="print-body">
                        <!-- print-layout-report -->
                        <div class="invoice-no-heading">
                          <h5 class="bold-invoice" style="font-size: 18px;"> Invoice No: {{report.invoiceNo}}, {{report.createdDate | date : 'dd/MM/yyyy'}}</h5>
                        </div>
                        <table
                            class="print-layout-report table process-tb table-bordered table-striped table-process-fnt dying-table width-100">
                            <tr>
                                <th>Lot No</th>
                                <th>Master</th>
                                <th>Party</th>
                                <th>Quality Name</th>
                                <th>Pcs</th>
                                <th>Grey Mtr</th>
                                <th>Finish Mtr</th>
                                <th>Rate</th>
                                <th>Total Amount</th>
                            </tr>
                            <tr *ngFor="let invoice of report.consolidatedBillDataList; let i = index"
                                [style.background]="(i%2 == 0)? '#ffffff' : '#f2f2f2'">
                                <td>{{invoice.batchId}}</td>
                                <td>{{invoice.headName}}</td>
                                <td> {{invoice.partyName}}</td>
                                <td>{{invoice.qualityName}}</td>
                                <td>{{invoice.pcs}}</td>
                                <td>{{invoice.totalMtr}}</td>
                                <td>{{invoice.totalFinishMtr}}</td>
                                <td>{{invoice.rate}}</td>
                                <td>{{invoice.amt}}</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="text-right">
                        <span>Total Grey Meter - <h3>{{totalGrayMeter}}</h3></span>
                    </div>
                    <div class="text-right">
                        <span>Total Finished Meter - <h3>{{totalFinishedMeter}}</h3></span>
                    </div>
                    <div class="text-right">
                        <span>Total Amount - <h3>{{totalAmount}}</h3></span>
                    </div>
                </div>
            </div>

            <!-- <div class="container" *ngIf="detailedReport && detailedReport.length > 0" id="detailedReport" class="mr-top-left-50">
                <div *ngFor="let invoice of detailedReport">
                    <div class="row">
                        <div class="col-md-3 width-30 font-styles">
                            <div class="text-center">
                                <h2 class="display-inlineblock mr-10 font-25"> Master:</h2> <span class="tb-name table-text-display">{{invoice.headName}}</span>
                            </div>
                        </div>
                        <div class="col-md-3 width-32 font-styles">
                            <div class="text-center">
                                <h2 class="display-inlineblock mr-10 font-25"> Party:</h2> <span class="tb-name table-text-display">{{invoice.partyName}}</span>
                            </div>
                        </div>
                        <div class="col-md-3 width-32 font-styles">
                            <div class="text-center">
                                <h2 class="display-inlineblock mr-10 font-25">Invoice No:</h2> <span class="tb-name table-text-display">{{invoice.invoiceNo}}</span>
                            </div>
                        </div>


                        <div class="col-md-12 width-100 mr-bottom-55">
                            <div class="width-90 text-center  ">
                                <h1 class="font-25">Quality List</h1>
                                <table class="table process-tb table-bordered table-striped table-process-fnt dying-table width-100">
                                    <tr>
                                        <th>Batch Id</th>
                                        <th>Quality ID</th>
                                        <th>Total Meter</th>
                                        <th>Total Finished Meter</th>
                                        <th>Rate</th>
                                        <th>Total Amount</th>
                                    </tr>
                                    <tr  *ngFor="let quality of invoice.qualityList">
                                        <td>{{quality.batchId}}</td>
                                        <td>{{quality.qulityId}}</td>
                                        <td>{{quality.totalMtr}}</td>
                                        <td>{{quality.totalFinishMtr}}</td>
                                        <td>{{quality.rate}}</td>
                                        <td>{{quality.amt}}</td>
                                    </tr>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
        </form>
    </nb-card-body>
</nb-card>